\hypertarget{classbot_1_1Database}{}\doxysection{bot\+::Database Class Reference}
\label{classbot_1_1Database}\index{bot::Database@{bot::Database}}


Class that provides interface to work with S\+Q\+Lite3.  




{\ttfamily \#include $<$database.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbot_1_1Database_aabbf6e964ced8609b565b3e355241336}\label{classbot_1_1Database_aabbf6e964ced8609b565b3e355241336}} 
void \mbox{\hyperlink{classbot_1_1Database_aabbf6e964ced8609b565b3e355241336}{open}} ()
\begin{DoxyCompactList}\small\item\em Opens the database if not opened. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classbot_1_1Database_a280f1c502194220f4bc91e647e901e93}\label{classbot_1_1Database_a280f1c502194220f4bc91e647e901e93}} 
void \mbox{\hyperlink{classbot_1_1Database_a280f1c502194220f4bc91e647e901e93}{init\+\_\+table}} ()
\begin{DoxyCompactList}\small\item\em Creates the database if not exists. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classbot_1_1Database_ae13e4367f42fb94b8436ec723b68b22c}{insert\+\_\+role}} (const long \&user\+\_\+id, const long \&peer\+\_\+id, const std\+::string \&role)
\begin{DoxyCompactList}\small\item\em Inserts user role to the table. \end{DoxyCompactList}\item 
std\+::vector$<$ long $>$ \mbox{\hyperlink{classbot_1_1Database_a5ad9986a67ec99d4cf60b940b0a735da}{get\+\_\+roles}} (const long \&peer\+\_\+id, const std\+::string \&role=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em Get user ids with all or specified role in the chat. \end{DoxyCompactList}\item 
std\+::string \mbox{\hyperlink{classbot_1_1Database_a2b9fe4b1907929014e3dc18acf28be3b}{get\+\_\+role}} (const long \&user\+\_\+id, const long \&peer\+\_\+id)
\begin{DoxyCompactList}\small\item\em Get role of user in the chat. \end{DoxyCompactList}\item 
std\+::vector$<$ long $>$ \mbox{\hyperlink{classbot_1_1Database_ac1efe120e01165bfad8ea2c7475f5c46}{get\+\_\+peer\+\_\+ids}} ()
\begin{DoxyCompactList}\small\item\em Get all the peer ids visited by the bot. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
static int \mbox{\hyperlink{classbot_1_1Database_addd6d475f5d9635d73ca1388439c463b}{callback}} (void $\ast$not\+\_\+used, int argc, char $\ast$argv\mbox{[}$\,$\mbox{]}, char $\ast$$\ast$col\+\_\+name)
\begin{DoxyCompactList}\small\item\em Callback function, needed by sqlite3\+\_\+exec function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classbot_1_1Database_a311fb62850df5b3cfb9c4b08693d7bfb}\label{classbot_1_1Database_a311fb62850df5b3cfb9c4b08693d7bfb}} 
sqlite3 $\ast$ \mbox{\hyperlink{classbot_1_1Database_a311fb62850df5b3cfb9c4b08693d7bfb}{database}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{classbot_1_1Database}{Database}} object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classbot_1_1Database_aff43382895aa85f55c3d9c935ec7dbc2}\label{classbot_1_1Database_aff43382895aa85f55c3d9c935ec7dbc2}} 
int \mbox{\hyperlink{classbot_1_1Database_aff43382895aa85f55c3d9c935ec7dbc2}{rc}} = 0
\begin{DoxyCompactList}\small\item\em Error code. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classbot_1_1Database_a4857fe76634889d4866c8074f92fc663}\label{classbot_1_1Database_a4857fe76634889d4866c8074f92fc663}} 
char $\ast$ \mbox{\hyperlink{classbot_1_1Database_a4857fe76634889d4866c8074f92fc663}{err}} = nullptr
\begin{DoxyCompactList}\small\item\em String reserved for error message. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classbot_1_1Database_a8e3fbe1ec5fc11832de857ab24d0f0b4}\label{classbot_1_1Database_a8e3fbe1ec5fc11832de857ab24d0f0b4}} 
bool \mbox{\hyperlink{classbot_1_1Database_a8e3fbe1ec5fc11832de857ab24d0f0b4}{is\+\_\+opened}} = false
\begin{DoxyCompactList}\small\item\em Boolean value needed to check if the D\+B\+MS is currently opened. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Class that provides interface to work with S\+Q\+Lite3. 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classbot_1_1Database_addd6d475f5d9635d73ca1388439c463b}\label{classbot_1_1Database_addd6d475f5d9635d73ca1388439c463b}} 
\index{bot::Database@{bot::Database}!callback@{callback}}
\index{callback@{callback}!bot::Database@{bot::Database}}
\doxysubsubsection{\texorpdfstring{callback()}{callback()}}
{\footnotesize\ttfamily static int bot\+::\+Database\+::callback (\begin{DoxyParamCaption}\item[{void $\ast$}]{not\+\_\+used,  }\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]},  }\item[{char $\ast$$\ast$}]{col\+\_\+name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Callback function, needed by sqlite3\+\_\+exec function. 


\begin{DoxyParams}{Parameters}
{\em not\+\_\+used} & \\
\hline
{\em argc} & \\
\hline
{\em argv} & \\
\hline
{\em col\+\_\+name} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0. 
\end{DoxyReturn}
\mbox{\Hypertarget{classbot_1_1Database_ac1efe120e01165bfad8ea2c7475f5c46}\label{classbot_1_1Database_ac1efe120e01165bfad8ea2c7475f5c46}} 
\index{bot::Database@{bot::Database}!get\_peer\_ids@{get\_peer\_ids}}
\index{get\_peer\_ids@{get\_peer\_ids}!bot::Database@{bot::Database}}
\doxysubsubsection{\texorpdfstring{get\_peer\_ids()}{get\_peer\_ids()}}
{\footnotesize\ttfamily std\+::vector$<$long$>$ bot\+::\+Database\+::get\+\_\+peer\+\_\+ids (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Get all the peer ids visited by the bot. 

\begin{DoxyReturn}{Returns}
Vector of peer\+\_\+ids. 
\end{DoxyReturn}
\mbox{\Hypertarget{classbot_1_1Database_a2b9fe4b1907929014e3dc18acf28be3b}\label{classbot_1_1Database_a2b9fe4b1907929014e3dc18acf28be3b}} 
\index{bot::Database@{bot::Database}!get\_role@{get\_role}}
\index{get\_role@{get\_role}!bot::Database@{bot::Database}}
\doxysubsubsection{\texorpdfstring{get\_role()}{get\_role()}}
{\footnotesize\ttfamily std\+::string bot\+::\+Database\+::get\+\_\+role (\begin{DoxyParamCaption}\item[{const long \&}]{user\+\_\+id,  }\item[{const long \&}]{peer\+\_\+id }\end{DoxyParamCaption})}



Get role of user in the chat. 


\begin{DoxyParams}{Parameters}
{\em User} & id \\
\hline
{\em Peer} & id, where role must be getted \\
\hline
{\em Setted} & role of user. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classbot_1_1Database_a5ad9986a67ec99d4cf60b940b0a735da}\label{classbot_1_1Database_a5ad9986a67ec99d4cf60b940b0a735da}} 
\index{bot::Database@{bot::Database}!get\_roles@{get\_roles}}
\index{get\_roles@{get\_roles}!bot::Database@{bot::Database}}
\doxysubsubsection{\texorpdfstring{get\_roles()}{get\_roles()}}
{\footnotesize\ttfamily std\+::vector$<$long$>$ bot\+::\+Database\+::get\+\_\+roles (\begin{DoxyParamCaption}\item[{const long \&}]{peer\+\_\+id,  }\item[{const std\+::string \&}]{role = {\ttfamily \char`\"{}\char`\"{}} }\end{DoxyParamCaption})}



Get user ids with all or specified role in the chat. 


\begin{DoxyParams}{Parameters}
{\em Peer} & id, where role must be getted \\
\hline
{\em Role} & name \\
\hline
{\em Vector} & of user\+\_\+ids with selected(or not) role. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classbot_1_1Database_ae13e4367f42fb94b8436ec723b68b22c}\label{classbot_1_1Database_ae13e4367f42fb94b8436ec723b68b22c}} 
\index{bot::Database@{bot::Database}!insert\_role@{insert\_role}}
\index{insert\_role@{insert\_role}!bot::Database@{bot::Database}}
\doxysubsubsection{\texorpdfstring{insert\_role()}{insert\_role()}}
{\footnotesize\ttfamily void bot\+::\+Database\+::insert\+\_\+role (\begin{DoxyParamCaption}\item[{const long \&}]{user\+\_\+id,  }\item[{const long \&}]{peer\+\_\+id,  }\item[{const std\+::string \&}]{role }\end{DoxyParamCaption})}



Inserts user role to the table. 


\begin{DoxyParams}{Parameters}
{\em Id} & of the user receiving the role \\
\hline
{\em Peer} & id, where user gets role \\
\hline
{\em Name} & of role \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/database.\+hpp\end{DoxyCompactItemize}
